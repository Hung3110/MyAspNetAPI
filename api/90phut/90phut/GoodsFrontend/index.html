<!DOCTYPE html>
<html>
<head>
    <title>Goods Frontend</title>
</head>
<body>
    <h1>Quản lý hàng hóa</h1>
    <div>
        <input type="text" id="maHangHoa" placeholder="Mã hàng hóa (9 ký tự)" maxlength="9" />
        <input type="text" id="tenHangHoa" placeholder="Tên hàng hóa" />
        <input type="number" id="soLuong" placeholder="Số lượng" />
        <button onclick="createHangHoa()">Thêm</button>
    </div>
    <table border="1">
        <thead>
            <tr>
                <th>Mã hàng hóa</th>
                <th>Tên hàng hóa</th>
                <th>Số lượng</th>
                <th>Ghi chú</th>
                <th>Hành động</th>
            </tr>
        </thead>
        <tbody id="goodsList"></tbody>
    </table>

    <script>
        const apiUrl = "https://localhost:<port>/api/HangHoa"; // Thay <port> bằng port thực tế

        // Lấy danh sách hàng hóa
        async function fetchGoods() {
            const response = await fetch(apiUrl);
            const goods = await response.json();
            const tbody = document.getElementById("goodsList");
            tbody.innerHTML = "";
            goods.forEach(g => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${g.maHangHoa}</td>
                    <td>${g.tenHangHoa}</td>
                    <td>${g.soLuong}</td>
                    <td>${g.ghiChu || ""}</td>
                    <td>
                        <button onclick="updateHangHoa('${g.maHangHoa}')">Sửa</button>
                        <button onclick="deleteHangHoa('${g.maHangHoa}')">Xóa</button>
                    </td>`;
                tbody.appendChild(tr);
            });
        }

        // Thêm hàng hóa
        async function createHangHoa() {
            const hangHoa = {
                maHangHoa: document.getElementById("maHangHoa").value,
                tenHangHoa: document.getElementById("tenHangHoa").value,
                soLuong: parseInt(document.getElementById("soLuong").value)
            };
            await fetch(apiUrl, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(hangHoa)
            });
            fetchGoods();
        }

        // Xóa hàng hóa
        async function deleteHangHoa(maHangHoa) {
            await fetch(`${apiUrl}/${maHangHoa}`, { method: "DELETE" });
            fetchGoods();
        }
        // ghi chú 
        async function updateHangHoa(maHangHoa) {
            const ghiChu = prompt("Nhập ghi chú mới:");
            await fetch(`${apiUrl}/${maHangHoa}/ghi-chu`, {
                method: "PUT",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(ghiChu)
            });
            fetchGoods();
        }
        // Load danh sách khi khởi động
        fetchGoods();
    </script>


</body>
</html>

